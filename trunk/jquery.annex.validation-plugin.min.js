$.extend($.jqueryAnnexData,{validation:{config:{isValid:!0,messages:[],registeredTargets:{all:[]},globalCallback:$.noop,additionalWidgetEvents:"",validateOnWidgetEvents:!0,defaultValidationData:{isValid:!0,isOptional:!1,hasNonOptionalValue:!1,optionalValues:[""],asyncError:!1,asyncCount:0,asyncLeft:0,messages:[],values:[]}},functions:{validate:function(a,b){if($.isSet(b)||(b=!1),!b||b&&$.jqueryAnnexData.validation.config.validateOnWidgetEvents){var c=a.length;$.jqueryAnnexData.validation.config.isValid=!0,$.jqueryAnnexData.validation.config.messages=[],$.each(a,function(a,b){if($.isSet(b)){var d=b.data("validationdata");if($.isSet(d)){b.first().one("finished.validation",function(a,b){a.stopPropagation(),$.jqueryAnnexData.validation.config.isValid=$.jqueryAnnexData.validation.config.isValid&&b,b||$.merge($.jqueryAnnexData.validation.config.messages,$(a.target).data("validationdata").status.messages),c--,0>=c&&($.jqueryAnnexData.validation.config.globalCallback($.jqueryAnnexData.validation.config.isValid,$.jqueryAnnexData.validation.config.messages),$(document).trigger("finished.validation",$.jqueryAnnexData.validation.config.isValid))});var e=d.status.isOptional,f=d.status.asyncCount;d.status=$.extend(!0,{},$.jqueryAnnexData.validation.config.defaultValidationData),d.status.isOptional=e,d.status.asyncCount=f,d.status.asyncLeft=f,d.status.values=d.container.formDataToObject()[b.attr("name").replace(/\[\]/,"")],$.isSet(d.status.values)?$.isArray(d.status.values)||(d.status.values=[d.status.values]):d.status.values=[],d.status.isOptional&&$.each(d.status.values,function(a,b){return-1==$.inArray(b,d.status.optionalValues)?(d.status.hasNonOptionalValue=!0,!1):void 0}),b.data("validationdata",d),$.jqueryAnnexData.validation.functions.unmarkValidationError(b),!d.status.isOptional||d.status.hasNonOptionalValue?($.each(d.rules,function(a,b){d.status.isValid=b()&&d.status.isValid}),d.status.isValid||($.jqueryAnnexData.validation.functions.markValidationError(b),d.status.asyncLeft<=0&&($.isSet(d.callback)&&$.isFunction(d.callback)&&d.callback(!1,d.status.messages,b),b.trigger("error.validation",d.status.messages)))):d.status.asyncLeft=0,d.status.asyncLeft<=0&&(d.status.isValid&&($.isSet(d.callback)&&$.isFunction(d.callback)&&d.callback(!0,[],b),b.trigger("success.validation")),b.trigger("finished.validation",d.status.isValid))}else b.unsetValidation(!0)}})}},markValidationError:function(a){var b=a.data("validationdata").errorContainer;$.isSet(b)&&b.addClass("validationerror"),a.addClass("validationerror")},unmarkValidationError:function(a){var b=a.data("validationdata").errorContainer;$.isSet(b)&&b.removeClass("validationerror"),a.removeClass("validationerror")},asyncCallbackFactory:function(a,b){var c=a.data("validationdata").status,d=a.data("validationdata").callback,e=function(e){var f=$.isA(e,"boolean")?e:""===$.trim(""+e);c.asyncError=c.asyncError&&!f,c.isValid=c.isValid&&f,c.asyncLeft--,c.isValid?c.asyncLeft<=0&&($.isSet(d)&&$.isFunction(d)&&d(!0,[],a),a.trigger("success.validation")):($.jqueryAnnexData.validation.functions.markValidationError(a),f||($.isA(e,"string")&&""!==$.trim(""+e)?c.messages.push($.trim(""+e)):c.messages.push(b)),c.asyncLeft<=0&&($.isSet(d)&&$.isFunction(d)&&d(!1,c.messages,a),a.trigger("error.validation",c.messages))),c.asyncLeft<=0&&a.trigger("finished.validation",c.isValid)};return e},asyncErrorCallbackFactory:function(a){var b=a.data("validationdata").status,c=a.data("validationdata").callback,d=function(){b.asyncLeft--,b.asyncError=!0,b.isValid=b.isValid&&!b.asyncError,$.jqueryAnnexData.validation.functions.markValidationError(a),b.messages.push("communication error, could not retrieve data from server"),$.log("communication error, could not retrieve data from server"),b.asyncLeft<=0&&($.isSet(c)&&$.isFunction(c)&&c(!1,b.messages,a),a.trigger("error.validation",b.messages),a.trigger("finished.validation",!1))};return d}},validators:{customcase:function(a,b){var d=!0,e=$(this).data("validationdata").status,f=null;if($.isArray(b)&&b.length<2&&(b=b[0]),$.isFunction(b)){var g=b($.jqueryAnnexData.validation.functions.asyncCallbackFactory($(this),a),$.jqueryAnnexData.validation.functions.asyncErrorCallbackFactory($(this)));$.isSet(g)&&($.isA(g,"boolean")?d=g:""!==$.trim(""+g)&&(d=!1,f=$.trim(""+g)))}else $.isA(b,"boolean")?d=b:""!==$.trim(""+b)&&(d=!1,f=$.trim(""+b));return $.isSet(f)?e.messages.push(a):!d&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),d},required:function(a){var b=!0,c=$(this).data("validationdata").status;return b=1==c.values.length?""!==c.values[0]:c.values.length>0,!b&&$.isSet(a)&&""!==a&&c.messages.push(a),b},notempty:function(a){var b=Array.prototype.slice.call(arguments,1),c=!0,d=$(this).data("validationdata").status,e=[""];return $.merge(e,b),c=1==d.values.length?-1==$.inArray($.trim(d.values[0]),e):0!==d.values.length,!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},optional:function(){return!0},minlength:function(a,b){b=parseInt(b,10);var c=!0,d=$(this).data("validationdata").status;return c=1==d.values.length?d.values[0].length>=b:d.values.length>=b,!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},maxlength:function(a,b){b=parseInt(b,10);var c=!0,d=$(this).data("validationdata").status;return c=1==d.values.length?d.values[0].length<=b:d.values.length<=b,!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},rangelength:function(a,b,c){var d=!0,e=$(this).data("validationdata").status;return $.isSet(b,c)&&(d=$.proxy($.jqueryAnnexData.validation.validators.minlength,$(this),null,b)()&&$.proxy($.jqueryAnnexData.validation.validators.maxlength,$(this),null,c)()),!d&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),d},min:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){return c=c&&$.isNumeric(d)&&parseInt(d,10)>=b,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},max:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){return c=c&&$.isNumeric(d)&&parseInt(d,10)<=b,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},range:function(a,b,c){var d=!0,e=$(this).data("validationdata").status;return $.isSet(b,c)&&(d=$.proxy($.jqueryAnnexData.validation.validators.min,$(this),null,b)()&&$.proxy($.jqueryAnnexData.validation.validators.max,$(this),null,c)()),!d&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),d},email:function(a){var b=!0,c=$(this).data("validationdata").status;return $.each(c.values,function(a,c){var d=/^[^@]{1,64}@[^@]{1,255}$/.test(c);if(d){for(var e=c.split("@"),f=e[0].split("."),g=0;g<f.length;g++)/^(([A-Za-z0-9!#$%&'*+\/=?^_`{|}~-][A-Za-z0-9!#$%&'*+\/=?^_`{|}~\.-]{0,63})|(\\\"[^(\\|\\\")]{0,62}\\\"))$/.test(f[g])||(d=!1);var h="";if(!/^\[?[0-9\.]+\]?$/.test(e[1]))for(h=e[1].split("."),h.length<2&&(d=!1),g=0;g<h.length;g++)/^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|([A-Za-z0-9]{2,5}))$/.test(h[g])||(d=!1)}return b=b&&d,b?void 0:!1}),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},url:function(a){var b=!0,c=$(this).data("validationdata").status;return $.each(c.values,function(a,c){return b=b&&/^(https?|ftp)\:\/\/([a-z0-9+!*(),;?&=$_.-]+(\:[a-z0-9+!*(),;?&=$_.-]+)?@)?([a-z0-9+$_-]+\.)*[a-z0-9+$_-]{2,3}(\:[0-9]{2,5})?(\/([a-z0-9+$_-]\.?)+)*\/?(\?[a-z+&$_.-][a-z0-9;:@\/&%=+$_.-]*)?(#[a-z_.-][a-z0-9+$_.-]*)?$/.test(c),b?void 0:!1}),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},date:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){if($.isSet(b)&&"__internal__"==b){var e=d.split(" ");d=e.length>=2?$.trim(e[0]):""}var f=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[1-2][0-9]|3[0-1])\/([1-2][0-9]{3})$/.test(d),g=f?d.split("/"):null;if(f)for(var h=0;2>h;h++)g[h].length<2&&(g[h]="0"+g[h]);var i=f?new Date(g[2]+"-"+g[0]+"-"+g[1]):null,j=null!==i&&null!==g?!/Invalid|NaN/.test(i)&&parseInt(g[0],10)==i.getMonth()+1&&parseInt(g[1],10)==i.getDate()&&parseInt(g[2],10)==i.getFullYear():!1;return c=c&&j,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},time:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){if($.isSet(b)&&"__internal__"==b){var e=d.split(" ");e.length>=2?(d=$.trim(e[1]),e.length>=3&&(d+=" "+$.trim(e[2]))):d=""}var f=/^((0?[0-9]|1[0-1])\:[0-5][0-9](\:[0-5][0-9])? ?(am|AM|pm|PM)|12\:[0-5][0-9](\:[0-5][0-9])? ?(pm|PM))$/.test(d);return c=c&&f,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},datetime:function(a){var b=!0,c=$(this).data("validationdata").status;return b=$.proxy($.jqueryAnnexData.validation.validators.date,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.time,$(this),null,"__internal__")(),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},dateISO:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){if($.isSet(b)&&"__internal__"==b){var e=d.replace(/T/," ").split(" ");d=e.length>=2?$.trim(e[0]):""}var f=/^([1-2][0-9]{3})\-(0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])$/.test(d),g=f?d.split("-"):null;if(f)for(var h=1;3>h;h++)g[h].length<2&&(g[h]="0"+g[h]);var i=f?new Date(g.join("-")):null,j=null!==i&&null!==g?!/Invalid|NaN/.test(i)&&parseInt(g[0],10)==i.getFullYear()&&parseInt(g[1],10)==i.getMonth()+1&&parseInt(g[2],10)==i.getDate():!1;return c=c&&j,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},timeISO:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){if($.isSet(b)&&"__internal__"==b){var e=d.replace(/T/," ").split(" ");d=e.length>=2?$.trim(e[1]):""}var f=/^([0-1][0-9]|2[0-3])\:[0-5][0-9]\:[0-5][0-9]$/.test(d);return c=c&&f,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},datetimeISO:function(a){var b=!0,c=$(this).data("validationdata").status;return b=$.proxy($.jqueryAnnexData.validation.validators.dateISO,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.timeISO,$(this),null,"__internal__")(),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},dateDE:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){if($.isSet(b)&&"__internal__"==b){var e=d.split(" ");d=e.length>=2?$.trim(e[0]):""}var f=/^(0?[1-9]|[1-2][0-9]|3[0-1])\.(0?[1-9]|1[0-2])\.([1-2][0-9]{3})$/.test(d),g=f?d.split("."):null;if(f)for(var h=0;2>h;h++)g[h].length<2&&(g[h]="0"+g[h]);var i=f?new Date(g[2]+"-"+g[1]+"-"+g[0]):null,j=null!==i&&null!==g?!/Invalid|NaN/.test(i)&&parseInt(g[0],10)==i.getDate()&&parseInt(g[1],10)==i.getMonth()+1&&parseInt(g[2],10)==i.getFullYear():!1;return c=c&&j,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},timeDE:function(a,b){var c=!0,d=$(this).data("validationdata").status;return $.each(d.values,function(a,d){if($.isSet(b)&&"__internal__"==b){var e=d.split(" ");d=e.length>=2?$.trim(e[1]):""}var f=/^([0-1][0-9]|2[0-3])\:[0-5][0-9](\:[0-5][0-9])?h?$/.test(d);return c=c&&f,c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c},datetimeDE:function(a){var b=!0,c=$(this).data("validationdata").status;return b=$.proxy($.jqueryAnnexData.validation.validators.dateDE,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.timeDE,$(this),null,"__internal__")(),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},number:function(a){var b=!0,c=$(this).data("validationdata").status;return $.each(c.values,function(a,c){return b=b&&(c==""+parseInt(c,10)||c==""+parseFloat(c)),b?void 0:!1}),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},numberDE:function(a){var b=!0,c=$(this).data("validationdata").status;return $.each(c.values,function(a,c){var d=/^[0-9]+(\,[0-9]+)?$/.test(c);return d&&(c=c.replace(/\,/g,"."),d=c==""+parseInt(c,10)||c==""+parseFloat(c)),b=b&&d,b?void 0:!1}),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},digits:function(a){var b=!0,c=$(this).data("validationdata").status;return $.each(c.values,function(a,c){return b=b&&/^[0-9]+$/.test(c),b?void 0:!1}),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},creditcard:function(a){var b=!0,c=$(this).data("validationdata").status;return $.each(c.values,function(a,c){return b=b&&/^[0-9]{3,4}\-[0-9]{4}\-[0-9]{4}\-[0-9]{4}$/.test(c),b?void 0:!1}),!b&&$.isSet(a)&&""!==$.trim(a)&&c.messages.push(a),b},characterclass:function(a,b){var c=!0,d=$(this).data("validationdata").status,e=new RegExp("^["+b+"]*$");return $.each(d.values,function(a,b){return c=c&&e.test(b),c?void 0:!1}),!c&&$.isSet(a)&&""!==$.trim(a)&&d.messages.push(a),c}}}}),$.extend({triggerValidation:function(a){a=$.isSet(a)?""+a:"all",$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets[a])},executeOnValidation:function(a){$.assert($.isFunction(a),"executeOnValidation | callback is no function"),$.jqueryAnnexData.validation.config.globalCallback=a},validationIsTriggeredByWidgetEvents:function(a){a=a?!0:!1,$.jqueryAnnexData.validation.config.validateOnWidgetEvents=a},setAdditionalValidationWidgetEvents:function(a){$.assert($.isArray(a),"events need to be an array");var b="";$.each(a,function(a,c){b+=c+".validation "}),b=" "+$.trim(b),$.jqueryAnnexData.validation.config.additionalWidgetEvents=b},setValidationFromTags:function(){$(":input[data-validation]").each(function(){if($.isPlainObject($(this).data("validation"))||$.isArray($(this).data("validation"))){var a=$.isSet($(this).data("validation-callback"))&&$.isFunction($(this).data("validation-callback"))?$(this).data("validation-callback"):null,b=$.isSet($(this).data("validation-errorcontainer"))&&$.exists($(this).data("validation-errorcontainer"))?$(this).data("validation-errorcontainer"):null,c=$.isSet($(this).data("validation-container"))&&$.exists($(this).data("validation-container"))?$(this).data("validation-container"):null,d=$.isSet($(this).data("validation-targetgroup"))?$(this).data("validation-targetgroup"):null,e=$.isSet($(this).data("validation-suppresssubmit"))?"true"==$(this).data("validation-suppresssubmit"):!1;$(this).setValidation($(this).data("validation"),a,b,c,d,e)}})}}),$.fn.extend({setValidation:function(a,b,c,d,e,f){return $.isSet(a)||(a=[]),$.isArray(a)||(a=[a]),e=$.isSet(e)?""+e:"all",f=$.isSet(f)?f===!0:!1,$.isSet(d)?d=d.find(":input"):(d=$(this).closest("form"),$.exists(d)?(d.off("submit.validation"),d.on("submit.validation",function(a,b){$.isSet(b)?(!b||f)&&a.preventDefault():(a.preventDefault(),$(document).one("finished.validation",function(a,b){d.trigger("submit.validation",b)}),$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets[e]))})):d=$(this)),$(this).each(function(){$.assert($(this).is(":input"),"setValidation | element is no value-bearing form element"),$.assert($.isSet($(this).attr("name")),'setValidation | element has no attribute "name"');var f=this;$(this).removeData("validationdata");var g={status:$.extend({},$.jqueryAnnexData.validation.config.defaultValidationData),rules:{},callback:b,container:d,errorContainer:c},h=0;$.each(a,function(a,b){var c=$.objectLength(b);if($.isPlainObject(b)&&c>=1&&2>=c){2==c&&$.assert($.exists("args",b));var d=null,e=null,i=$.exists("args",b)?$.isArray(b.args)?b.args:[b.args]:[];if($.each(b,function(a,b){return"args"!=a?(d=a,e=b,!1):void 0}),$.isSet(d)){d=d.split("_async");var j=d.length>1;d=d[0],"optional"==d&&(g.status.isOptional=!0,$.merge(g.status.optionalValues,i)),$.isFunction($.jqueryAnnexData.validation.validators[d])&&(j&&h++,g.rules[d+"_"+$.randomUUID(!0)]=$.proxy.apply($,$.merge([],$.merge([$.jqueryAnnexData.validation.validators[d],$(f),""+$.trim(e)],i))))}}}),g.status.asyncCount=h,$.jqueryAnnexData.validation.config.registeredTargets.all.push($(this)),"all"!=e&&($.isSet($.jqueryAnnexData.validation.config.registeredTargets[e])||($.jqueryAnnexData.validation.config.registeredTargets[e]=[]),$.jqueryAnnexData.validation.config.registeredTargets[e].push($(this)));var i=null;$(this).data("validationdata",g).on("change.validation blur.validation"+$.jqueryAnnexData.validation.config.additionalWidgetEvents,function(){$.countermand(i),i=$.schedule(10,function(){$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets[e],!0)})})}),this},unsetValidation:function(a,b){return a=$.isSet(a)?a:!1,b=$.isSet(b)&&$.jqueryAnnexData.validation.config.registeredTargets[b]?""+b:null,$(this).each(function(){$.assert($(this).is(":input"),"unsetValidation | element is no value-bearing form element"),$.assert($.isSet($(this).attr("name")),'unsetValidation | element has no attribute "name"');var c=this;if($.isSet($(this).data("validationdata"))||a){$(this).removeData("validationdata");var d={};$.isSet(b)?(d.all=$.jqueryAnnexData.validation.config.registeredTargets.all,d[b]=$.jqueryAnnexData.validation.config.registeredTargets[b]):d=$.jqueryAnnexData.validation.config.registeredTargets,$.each(d,function(a,b){if($.isSet(b)){for(var d=-1,e=0;e<b.length;e++)if($(c).attr("name")==b[e].attr("name")){d=e;break}d>=0&&$.removeFromArray($.jqueryAnnexData.validation.config.registeredTargets[a],d),0===$.jqueryAnnexData.validation.config.registeredTargets[a].length&&($(this).closest("form").off("submit.validation"),"all"!=a&&delete $.jqueryAnnexData.validation.config.registeredTargets[a])}}),$(this).off("change.validation blur.validation"+$.jqueryAnnexData.validation.config.additionalWidgetEvents)}}),this}});