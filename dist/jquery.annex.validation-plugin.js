!function(a,t){var i=a.jQuery||a.$;if("function"==typeof define&&define.amd)define(["jqueryannex"],t);else if("object"==typeof module&&module.exports){if(!a.__AVA_ENV__)try{i||(i=require("jquery")),i.jqueryAnnexData||(i=require("jqueryannex"))}catch(a){}module.exports=i?t(i):function(a){return t(a)}}else t(i)}("undefined"!=typeof window?window:this,function(v){return function(){if(!v||!v.fn||!v().jquery)throw'jQueryAnnex Validation Plugin | cannot extend jQuery, since it does not seem to be available as "jQuery" or is missing basic functionality';if(!v.jqueryAnnexData)throw"jQueryAnnex Validation Plugin | cannot extend jQuery Annex, since it does not seem to be available yet"}(),v.extend(v.jqueryAnnexData,{validation:{config:{isValid:!0,messages:[],registeredTargets:{all:[]},globalCallback:v.noop,additionalWidgetEvents:"",validateOnWidgetEvents:!0,defaultValidationData:{isValid:!0,isDirty:!1,isOptional:!1,hasNonOptionalValue:!1,optionalValues:[""],asyncError:!1,asyncCount:0,asyncLeft:0,messages:[],values:[]}},functions:{validate:function(a,s){if(v.isSet(s)||(s=!1),!s||s&&v.jqueryAnnexData.validation.config.validateOnWidgetEvents){var r=a.length;v.jqueryAnnexData.validation.config.isValid=!0,v.jqueryAnnexData.validation.config.messages=[],v.each(a,function(a,t){if(v.isSet(t)){var i=t.data("validationdata");if(v.isSet(i)){if(!s||i.status.isDirty){t.first().one("finished.validation",function(a,t){a.stopPropagation(),v.jqueryAnnexData.validation.config.isValid=v.jqueryAnnexData.validation.config.isValid&&t,t||v.merge(v.jqueryAnnexData.validation.config.messages,v(a.target).data("validationdata").status.messages),--r<=0&&(v.jqueryAnnexData.validation.config.globalCallback(v.jqueryAnnexData.validation.config.isValid,v.jqueryAnnexData.validation.config.messages),v(document).trigger("finished.validation",v.jqueryAnnexData.validation.config.isValid))});var n=i.status.isOptional,e=i.status.asyncCount;i.status=v.extend(!0,{},v.jqueryAnnexData.validation.config.defaultValidationData),i.status.isDirty=!0,i.status.isOptional=n,i.status.asyncCount=e,i.status.asyncLeft=e,i.status.values=i.container.formDataToObject()[t.attr("name").replace(/\[\]/,"")],v.isSet(i.status.values)?v.isArray(i.status.values)||(i.status.values=[i.status.values]):i.status.values=[],i.status.isOptional&&v.each(i.status.values,function(a,t){if(-1===v.inArray(t,i.status.optionalValues))return!(i.status.hasNonOptionalValue=!0)}),t.data("validationdata",i),v.jqueryAnnexData.validation.functions.unmarkValidationError(t),i.status.isOptional&&!i.status.hasNonOptionalValue||v.isSet(t.attr("disabled"))?i.status.asyncLeft=0:(v.each(i.rules,function(a,t){i.status.isValid=t()&&i.status.isValid}),i.status.isValid||(v.jqueryAnnexData.validation.functions.markValidationError(t),i.status.asyncLeft<=0&&(v.isSet(i.callback)&&v.isFunction(i.callback)&&i.callback(!1,i.status.messages,t),t.trigger("error.validation",i.status.messages)))),i.status.asyncLeft<=0&&(i.status.isValid&&(v.isSet(i.callback)&&v.isFunction(i.callback)&&i.callback(!0,[],t),t.trigger("success.validation")),t.trigger("finished.validation",i.status.isValid))}}else t.unsetValidation(!0)}})}},markValidationError:function(a){var t=a.data("validationdata").errorContainer;v.isSet(t)&&t.addClass("validationerror"),a.addClass("validationerror")},unmarkValidationError:function(a){var t=a.data("validationdata").errorContainer;v.isSet(t)&&t.removeClass("validationerror"),a.removeClass("validationerror")},asyncCallbackFactory:function(i,n){var e=i.data("validationdata").status,s=i.data("validationdata").callback;return function(a){var t=v.isA(a,"boolean")?a:""===v.trim(""+a);e.asyncError=e.asyncError&&!t,e.isValid=e.isValid&&t,e.asyncLeft--,e.isValid?e.asyncLeft<=0&&(v.isSet(s)&&v.isFunction(s)&&s(!0,[],i),i.trigger("success.validation")):(v.jqueryAnnexData.validation.functions.markValidationError(i),t||(v.isA(a,"string")&&""!==v.trim(""+a)?e.messages.push(v.trim(""+a)):e.messages.push(n)),e.asyncLeft<=0&&(v.isSet(s)&&v.isFunction(s)&&s(!1,e.messages,i),i.trigger("error.validation",e.messages))),e.asyncLeft<=0&&i.trigger("finished.validation",e.isValid)}},asyncErrorCallbackFactory:function(a){var t=a.data("validationdata").status,i=a.data("validationdata").callback;return function(){t.asyncLeft--,t.asyncError=!0,t.isValid=t.isValid&&!t.asyncError,v.jqueryAnnexData.validation.functions.markValidationError(a),t.messages.push("communication error, could not retrieve data from server"),v.log("communication error, could not retrieve data from server"),t.asyncLeft<=0&&(v.isSet(i)&&v.isFunction(i)&&i(!1,t.messages,a),a.trigger("error.validation",t.messages),a.trigger("finished.validation",!1))}}},validators:{customcase:function(a,t){var i=!0,n=v(this).data("validationdata").status,e=null;if(v.isArray(t)&&t.length<2&&(t=t[0]),v.isFunction(t)){var s=t(v(this),v.jqueryAnnexData.validation.functions.asyncCallbackFactory(v(this),a),v.jqueryAnnexData.validation.functions.asyncErrorCallbackFactory(v(this)));v.isSet(s)&&(v.isA(s,"boolean")?i=s:""!==v.trim(""+s)&&(i=!1,e=v.trim(""+s)))}else v.isA(t,"boolean")?i=t:""!==v.trim(""+t)&&(i=!1,e=v.trim(""+t));return v.isSet(e)?n.messages.push(a):!i&&v.isSet(a)&&""!==v.trim(a)&&n.messages.push(a),i},required:function(a){var t=!0,i=v(this).data("validationdata").status;return!(t=1===i.values.length?""!==i.values[0]:0<i.values.length)&&v.isSet(a)&&""!==a&&i.messages.push(a),t},notempty:function(a){var t=Array.prototype.slice.call(arguments,1),i=!0,n=v(this).data("validationdata").status,e=[""];return v.merge(e,t),!(i=1===n.values.length?-1===v.inArray(v.trim(n.values[0]),e):0!==n.values.length)&&v.isSet(a)&&""!==v.trim(a)&&n.messages.push(a),i},optional:function(){return!0},minlength:function(a,t){t=parseInt(t,10);var i=!0,n=v(this).data("validationdata").status;return!(i=1===n.values.length?n.values[0].length>=t:n.values.length>=t)&&v.isSet(a)&&""!==v.trim(a)&&n.messages.push(a),i},maxlength:function(a,t){t=parseInt(t,10);var i=!0,n=v(this).data("validationdata").status;return!(i=1===n.values.length?n.values[0].length<=t:n.values.length<=t)&&v.isSet(a)&&""!==v.trim(a)&&n.messages.push(a),i},rangelength:function(a,t,i){var n=!0,e=v(this).data("validationdata").status;return v.isSet(t,i)&&(n=v.proxy(v.jqueryAnnexData.validation.validators.minlength,v(this),null,t)()&&v.proxy(v.jqueryAnnexData.validation.validators.maxlength,v(this),null,i)()),!n&&v.isSet(a)&&""!==v.trim(a)&&e.messages.push(a),n},min:function(a,i){var n=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(!(n=n&&v.isNumeric(t)&&parseInt(t,10)>=i))return!1}),!n&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),n},max:function(a,i){var n=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(!(n=n&&v.isNumeric(t)&&parseInt(t,10)<=i))return!1}),!n&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),n},range:function(a,t,i){var n=!0,e=v(this).data("validationdata").status;return v.isSet(t,i)&&(n=v.proxy(v.jqueryAnnexData.validation.validators.min,v(this),null,t)()&&v.proxy(v.jqueryAnnexData.validation.validators.max,v(this),null,i)()),!n&&v.isSet(a)&&""!==v.trim(a)&&e.messages.push(a),n},email:function(a){var l=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){var i=/^[^@]{1,64}@[^@]{1,255}$/.test(t);if(i){for(var n=t.split("@"),e=n[0].split("."),s=0;s<e.length;s++)/^(([A-Za-z0-9!#$%&'*+\/=?^_`{|}~-][A-Za-z0-9!#$%&'*+\/=?^_`{|}~\.-]{0,63})|(\\\"[^(\\|\\\")]{0,62}\\\"))$/.test(e[s])||(i=!1);var r="";if(!/^\[?[0-9\.]+\]?$/.test(n[1]))for((r=n[1].split(".")).length<2&&(i=!1),s=0;s<r.length;s++)/^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|([A-Za-z0-9]{2,5}))$/.test(r[s])||(i=!1)}if(!(l=l&&i))return!1}),!l&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),l},url:function(a){var i=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(!(i=i&&/^(https?|ftp)\:\/\/([a-z0-9+!*(),;?&=$_.-]+(\:[a-z0-9+!*(),;?&=$_.-]+)?@)?([a-z0-9+$_-]+\.)*[a-z0-9+$_-]{2,3}(\:[0-9]{2,5})?(\/([a-z0-9+$_-]\.?)+)*\/?(\?[a-z+&$_.-][a-z0-9;:@\/&%=+$_.-]*)?(#[a-z_.-][a-z0-9+$_.-]*)?$/.test(t)))return!1}),!i&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),i},date:function(a,o){var u=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(v.isSet(o)&&"__internal__"===o){var i=t.split(" ");t=2<=i.length?v.trim(i[0]):""}var n=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[1-2][0-9]|3[0-1])\/([1-2][0-9]{3})$/.test(t),e=n?t.split("/"):null;if(n)for(var s=0;s<2;s++)e[s].length<2&&(e[s]="0"+e[s]);var r=n?new Date(e[2]+"-"+e[0]+"-"+e[1]):null,l=null!==r&&null!==e&&(!/Invalid|NaN/.test(r)&&parseInt(e[0],10)===r.getMonth()+1&&parseInt(e[1],10)===r.getDate()&&parseInt(e[2],10)===r.getFullYear());if(!(u=u&&l))return!1}),!u&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),u},time:function(a,e){var s=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(v.isSet(e)&&"__internal__"===e){var i=t.split(" ");2<=i.length?(t=v.trim(i[1]),3<=i.length&&(t+=" "+v.trim(i[2]))):t=""}var n=/^((0?[0-9]|1[0-1])\:[0-5][0-9](\:[0-5][0-9])? ?(am|AM|pm|PM)|12\:[0-5][0-9](\:[0-5][0-9])? ?(pm|PM))$/.test(t);if(!(s=s&&n))return!1}),!s&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),s},datetime:function(a){var t,i=v(this).data("validationdata").status;return!(t=v.proxy(v.jqueryAnnexData.validation.validators.date,v(this),null,"__internal__")()&&v.proxy(v.jqueryAnnexData.validation.validators.time,v(this),null,"__internal__")())&&v.isSet(a)&&""!==v.trim(a)&&i.messages.push(a),t},dateISO:function(a,o){var u=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(v.isSet(o)&&"__internal__"===o){var i=t.replace(/T/," ").split(" ");t=2<=i.length?v.trim(i[0]):""}var n=/^([1-2][0-9]{3})\-(0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])$/.test(t),e=n?t.split("-"):null;if(n)for(var s=1;s<3;s++)e[s].length<2&&(e[s]="0"+e[s]);var r=n?new Date(parseInt(e[0],10),parseInt(e[1],10)-1,parseInt(e[2],10)):null,l=null!==r&&null!==e&&(!/Invalid|NaN/.test(r)&&parseInt(e[0],10)===r.getFullYear()&&parseInt(e[1],10)===r.getMonth()+1&&parseInt(e[2],10)===r.getDate());if(!(u=u&&l))return!1}),!u&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),u},timeISO:function(a,e){var s=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(v.isSet(e)&&"__internal__"===e){var i=t.replace(/T/," ").split(" ");t=2<=i.length?v.trim(i[1]):""}var n=/^([0-1][0-9]|2[0-3])\:[0-5][0-9]\:[0-5][0-9]$/.test(t);if(!(s=s&&n))return!1}),!s&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),s},datetimeISO:function(a){var t,i=v(this).data("validationdata").status;return!(t=v.proxy(v.jqueryAnnexData.validation.validators.dateISO,v(this),null,"__internal__")()&&v.proxy(v.jqueryAnnexData.validation.validators.timeISO,v(this),null,"__internal__")())&&v.isSet(a)&&""!==v.trim(a)&&i.messages.push(a),t},dateDE:function(a,o){var u=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(v.isSet(o)&&"__internal__"===o){var i=t.split(" ");t=2<=i.length?v.trim(i[0]):""}var n=/^(0?[1-9]|[1-2][0-9]|3[0-1])\.(0?[1-9]|1[0-2])\.([1-2][0-9]{3})$/.test(t),e=n?t.split("."):null;if(n)for(var s=0;s<2;s++)e[s].length<2&&(e[s]="0"+e[s]);var r=n?new Date(parseInt(e[2],10),parseInt(e[1],10)-1,parseInt(e[0],10)):null,l=null!==r&&null!==e&&(!/Invalid|NaN/.test(r)&&parseInt(e[0],10)===r.getDate()&&parseInt(e[1],10)===r.getMonth()+1&&parseInt(e[2],10)===r.getFullYear());if(!(u=u&&l))return!1}),!u&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),u},timeDE:function(a,e){var s=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(v.isSet(e)&&"__internal__"===e){var i=t.split(" ");t=2<=i.length?v.trim(i[1]):""}var n=/^([0-1][0-9]|2[0-3])\:[0-5][0-9](\:[0-5][0-9])?h?$/.test(t);if(!(s=s&&n))return!1}),!s&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),s},datetimeDE:function(a){var t,i=v(this).data("validationdata").status;return!(t=v.proxy(v.jqueryAnnexData.validation.validators.dateDE,v(this),null,"__internal__")()&&v.proxy(v.jqueryAnnexData.validation.validators.timeDE,v(this),null,"__internal__")())&&v.isSet(a)&&""!==v.trim(a)&&i.messages.push(a),t},number:function(a){var i=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(!(i=i&&(t===""+parseInt(t,10)||t===""+parseFloat(t))))return!1}),!i&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),i},numberDE:function(a){var n=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){var i=/^[0-9]+(\,[0-9]+)?$/.test(t);if(i&&(i=(t=t.replace(/\,/g,"."))===""+parseInt(t,10)||t===""+parseFloat(t)),!(n=n&&i))return!1}),!n&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),n},digits:function(a){var i=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(!(i=i&&/^[0-9]+$/.test(t)))return!1}),!i&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),i},creditcard:function(a){var i=!0,t=v(this).data("validationdata").status;return v.each(t.values,function(a,t){if(!(i=i&&/^[0-9]{3,4}\-[0-9]{4}\-[0-9]{4}\-[0-9]{4}$/.test(t)))return!1}),!i&&v.isSet(a)&&""!==v.trim(a)&&t.messages.push(a),i},characterclass:function(a,t){var i=!0,n=v(this).data("validationdata").status,e=new RegExp("^["+t+"]*$");return v.each(n.values,function(a,t){if(!(i=i&&e.test(t)))return!1}),!i&&v.isSet(a)&&""!==v.trim(a)&&n.messages.push(a),i}}}}),v.extend({triggerValidation:function(a){a=v.orDefault(a,"all","string"),v.jqueryAnnexData.validation.functions.validate(v.jqueryAnnexData.validation.config.registeredTargets[a])},executeOnValidation:function(a){v.assert(v.isFunction(a),"executeOnValidation | callback is no function"),v.jqueryAnnexData.validation.config.globalCallback=a},validationIsTriggeredByWidgetEvents:function(a){a=!!a,v.jqueryAnnexData.validation.config.validateOnWidgetEvents=a},setAdditionalValidationWidgetEvents:function(a){v.assert(v.isArray(a),"events need to be an array");var i="";v.each(a,function(a,t){i+=t+".validation "}),i=" "+v.trim(i),v.jqueryAnnexData.validation.config.additionalWidgetEvents=i},setValidationFromTags:function(){v(":input[data-validation]").each(function(){if(v.isPlainObject(v(this).data("validation"))||v.isArray(v(this).data("validation"))){var a=v.isSet(v(this).data("validation-callback"))&&v.isFunction(v(this).data("validation-callback"))?v(this).data("validation-callback"):null,t=v.isSet(v(this).data("validation-errorcontainer"))&&v.exists(v(this).data("validation-errorcontainer"))?v(this).data("validation-errorcontainer"):null,i=v.isSet(v(this).data("validation-container"))&&v.exists(v(this).data("validation-container"))?v(this).data("validation-container"):null,n=v.isSet(v(this).data("validation-targetgroup"))?v(this).data("validation-targetgroup"):null,e=!!v.isSet(v(this).data("validation-suppresssubmit"))&&"true"===v(this).data("validation-suppresssubmit");v(this).setValidation(v(this).data("validation"),a,t,i,n,e)}})}}),v.fn.extend({setValidation:function(n,e,s,r,d,i){return n=v.orDefault(n,[],"array"),d=v.orDefault(d,"all","string"),i=v.orDefault(i,!1,"bool"),v.isSet(r)?r=r.find(":input"):(r=v(this).closest("form"),v.exists(r)?(r.off("submit.validation"),r.on("submit.validation",function(a,t){v.isSet(t)?t&&!i||a.preventDefault():(a.preventDefault(),v(document).one("finished.validation",function(a,t){r.trigger("submit.validation",t)}),v.jqueryAnnexData.validation.functions.validate(v.jqueryAnnexData.validation.config.registeredTargets[d]))})):r=v(this)),v(this).each(function(){v.assert(v(this).is(":input"),"setValidation | element is no value-bearing form element"),v.assert(v.isSet(v(this).attr("name")),'setValidation | element has no attribute "name"');var l=this;v(this).removeData("validationdata");var o={status:v.extend({},v.jqueryAnnexData.validation.config.defaultValidationData),rules:{},callback:e,container:r,errorContainer:s},u=0;v.each(n,function(a,t){var i=v.objectLength(t);if(v.isPlainObject(t)&&1<=i&&i<=2){2===i&&v.assert(v.exists("args",t));var n=null,e=null,s=v.exists("args",t)?v.isArray(t.args)?t.args:[t.args]:[];if(v.each(t,function(a,t){if("args"!==a)return n=a,e=t,!1}),v.isSet(n)){var r=1<(n=n.split("_async")).length;"optional"===(n=n[0])&&(o.status.isOptional=!0,v.merge(o.status.optionalValues,s)),v.isFunction(v.jqueryAnnexData.validation.validators[n])&&(r&&u++,o.rules[n+"_"+v.randomUuid(!0)]=v.proxy.apply(v,v.merge([],v.merge([v.jqueryAnnexData.validation.validators[n],v(l),""+v.trim(e)],s))))}}}),o.status.asyncCount=u,v.jqueryAnnexData.validation.config.registeredTargets.all.push(v(this)),"all"!==d&&(v.isSet(v.jqueryAnnexData.validation.config.registeredTargets[d])||(v.jqueryAnnexData.validation.config.registeredTargets[d]=[]),v.jqueryAnnexData.validation.config.registeredTargets[d].push(v(this)));var t=null,i=null,a=r.find('[name="'+v(this).attr("name")+'"]');0===a.length&&(a=r.filter('[name="'+v(this).attr("name")+'"]')),a.each(function(){v(this).data("validationdata",o).off("change.validation blur.validation focus.validation"+v.jqueryAnnexData.validation.config.additionalWidgetEvents).on("change.validation blur.validation"+v.jqueryAnnexData.validation.config.additionalWidgetEvents,function(){var a=this;v.countermand(t),t=v.schedule(10,function(){v(a).data("validationdata").status.isDirty=!0,v.jqueryAnnexData.validation.functions.validate(v.jqueryAnnexData.validation.config.registeredTargets[d],!0)})}).on("focus.validation",function(){var a=this;v.countermand(i),i=v.schedule(10,function(){v(a).data("validationdata").status.isDirty=!0})})})}),this},unsetValidation:function(t,i){return t=v.orDefault(t,!1,"bool"),i=v.isSet(i)&&v.jqueryAnnexData.validation.config.registeredTargets[i]?""+i:null,v(this).each(function(){v.assert(v(this).is(":input"),"unsetValidation | element is no value-bearing form element"),v.assert(v.isSet(v(this).attr("name")),'unsetValidation | element has no attribute "name"');var e=this;if(v.isSet(v(this).data("validationdata"))||t){v(this).removeData("validationdata");var a={};v.isSet(i)?(a.all=v.jqueryAnnexData.validation.config.registeredTargets.all,a[i]=v.jqueryAnnexData.validation.config.registeredTargets[i]):a=v.jqueryAnnexData.validation.config.registeredTargets,v.each(a,function(a,t){if(v.isSet(t)){for(var i=-1,n=0;n<t.length;n++)if(v(e).attr("name")===t[n].attr("name")){i=n;break}0<=i&&(v.jqueryAnnexData.validation.config.registeredTargets[a]=v.removeFromArray(v.jqueryAnnexData.validation.config.registeredTargets[a],i)),0===v.jqueryAnnexData.validation.config.registeredTargets[a].length&&(v(this).closest("form").off("submit.validation"),"all"!==a&&delete v.jqueryAnnexData.validation.config.registeredTargets[a])}}),v(this).off("change.validation blur.validation"+v.jqueryAnnexData.validation.config.additionalWidgetEvents)}}),this}}),v});
//# sourceMappingURL=jquery.annex.validation-plugin.js.map
