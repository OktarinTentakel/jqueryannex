$.extend($.jqueryAnnexData,{validation:{config:{isValid:true,messages:[],registeredTargets:[],globalCallback:null,defaultValidationData:{isValid:true,isOptional:false,hasNonOptionalValue:false,optionalValues:[""],asyncError:false,asyncCount:0,asyncLeft:0,messages:[],values:[]}},functions:{validate:function(b){var a=b.length;$.jqueryAnnexData.validation.config.isValid=true;$.jqueryAnnexData.validation.config.messages=[];$.each(b,function(f,c){c.first().one("finished.validation",function(i,h){i.stopPropagation();$.jqueryAnnexData.validation.config.isValid=$.jqueryAnnexData.validation.config.isValid&&h;if(!h){$.merge($.jqueryAnnexData.validation.config.messages,$(i.target).data("validationdata").status.messages)}a--;if(a<=0){$.jqueryAnnexData.validation.config.globalCallback($.jqueryAnnexData.validation.config.isValid,$.jqueryAnnexData.validation.config.messages);$(document).trigger("finished.validation",$.jqueryAnnexData.validation.config.isValid)}});var e=c.data("validationdata");var d=e.status.isOptional;var g=e.status.asyncCount;e.status=$.extend(true,{},$.jqueryAnnexData.validation.config.defaultValidationData);e.status.isOptional=d;e.status.asyncCount=g;e.status.asyncLeft=g;e.status.values=e.container.formDataToObject()[c.attr("name").replace(/\[\]/,"")];if($.isSet(e.status.values)){if(!$.isArray(e.status.values)){e.status.values=[e.status.values]}}else{e.status.values=[]}if(e.status.isOptional){$.each(e.status.values,function(h,i){if($.inArray(i,e.status.optionalValues)==-1){e.status.hasNonOptionalValue=true;return false}})}c.data("validationdata",e);$.jqueryAnnexData.validation.functions.unmarkValidationError(c);if(!e.status.isOptional||e.status.hasNonOptionalValue){$.each(e.rules,function(h,i){e.status.isValid=i()&&e.status.isValid});if(!e.status.isValid){$.jqueryAnnexData.validation.functions.markValidationError(c);if(e.status.asyncLeft<=0){if($.isSet(e.callback)&&$.isFunction(e.callback)){e.callback(false,e.status.messages,c)}c.trigger("error.validation",e.status.messages)}}}else{e.status.asyncLeft=0}if(e.status.asyncLeft<=0){if(e.status.isValid){if($.isSet(e.callback)&&$.isFunction(e.callback)){e.callback(true,[],c)}c.trigger("success.validation")}c.trigger("finished.validation",e.status.isValid)}})},markValidationError:function(a){var b=a.data("validationdata").errorContainer;if($.isSet(b)){b.addClassUnique("validationerror")}a.addClassUnique("validationerror")},unmarkValidationError:function(a){var b=a.data("validationdata").errorContainer;if($.isSet(b)){b.removeClass("validationerror")}a.removeClass("validationerror")},asyncCallbackFactory:function(a,d){var b=a.data("validationdata").status;var e=a.data("validationdata").callback;var c=function(g){var f=$.isA(g,"boolean")?g:($.trim(""+g)=="");b.asyncError=b.asyncError&&!f;b.isValid=b.isValid&&f;b.asyncLeft--;if(!b.isValid){$.jqueryAnnexData.validation.functions.markValidationError(a);if(!f){if($.isA(g,"string")&&($.trim(""+g)!="")){b.messages.push($.trim(""+g))}else{b.messages.push(d)}}if(b.asyncLeft<=0){if($.isSet(e)&&$.isFunction(e)){e(false,b.messages,a)}a.trigger("error.validation",b.messages)}}else{if(b.asyncLeft<=0){if($.isSet(e)&&$.isFunction(e)){e(true,[],a)}a.trigger("success.validation")}}if(b.asyncLeft<=0){a.trigger("finished.validation",b.isValid)}};return c},asyncErrorCallbackFactory:function(a){var c=a.data("validationdata").status;var d=a.data("validationdata").callback;var b=function(){c.asyncLeft--;c.asyncError=true;c.isValid=c.isValid&&!c.asyncError;$.jqueryAnnexData.validation.functions.markValidationError(a);c.messages.push("communication error, could not retrieve data from server");$.log("communication error, could not retrieve data from server");if(c.asyncLeft<=0){if($.isSet(d)&&$.isFunction(d)){d(false,c.messages,a)}a.trigger("error.validation",c.messages);a.trigger("finished.validation",false)}};return b}},validators:{customcase:function(g,f){var d=this;var b=true;var a=$(this).data("validationdata").status;var e=null;if($.isArray(f)&&(f.length<2)){f=f[0]}if(!$.isFunction(f)){if($.isA(f,"boolean")){b=f}else{if($.trim(""+f)!=""){b=false;e=$.trim(""+f)}}}else{var c=f($.jqueryAnnexData.validation.functions.asyncCallbackFactory($(this),g),$.jqueryAnnexData.validation.functions.asyncErrorCallbackFactory($(this)));if($.isSet(c)){if($.isA(c,"boolean")){b=c}else{if($.trim(""+c)!=""){b=false;e=$.trim(""+c)}}}}if(!$.isSet(e)){if(!b&&$.isSet(g)&&($.trim(g)!="")){a.messages.push(g)}}else{a.messages.push(g)}return b},required:function(c){var b=true;var a=$(this).data("validationdata").status;if(a.values.length==1){b=!(a.values[0]=="")}else{b=!(a.values.length==0)}if(!b&&$.isSet(c)&&(c!="")){a.messages.push(c)}return b},notempty:function(e){var c=Array.prototype.slice.call(arguments,1);var b=true;var a=$(this).data("validationdata").status;var d=[""];$.merge(d,c);if(a.values.length==1){b=($.inArray($.trim(a.values[0]),d)==-1)}else{b=!(a.values.length==0)}if(!b&&$.isSet(e)&&($.trim(e)!="")){a.messages.push(e)}return b},optional:function(){return true},minlength:function(d,c){c=parseInt(c);var b=true;var a=$(this).data("validationdata").status;if(a.values.length==1){b=a.values[0].length>=c}else{b=(a.values.length>=c)}if(!b&&$.isSet(d)&&($.trim(d)!="")){a.messages.push(d)}return b},maxlength:function(d,c){c=parseInt(c);var b=true;var a=$(this).data("validationdata").status;if(a.values.length==1){b=a.values[0].length<=c}else{b=(a.values.length<=c)}if(!b&&$.isSet(d)&&($.trim(d)!="")){a.messages.push(d)}return b},rangelength:function(d,a,e){var c=true;var b=$(this).data("validationdata").status;if($.isSet(a,e)){c=$.proxy($.jqueryAnnexData.validation.validators.minlength,$(this),null,a)()&&$.proxy($.jqueryAnnexData.validation.validators.maxlength,$(this),null,e)()}if(!c&&$.isSet(d)&&($.trim(d)!="")){b.messages.push(d)}return c},min:function(d,c){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(e,f){b=b&&($.isNumeric(f)&&(parseInt(f)>=c));if(!b){return false}});if(!b&&$.isSet(d)&&($.trim(d)!="")){a.messages.push(d)}return b},max:function(d,a){var c=true;var b=$(this).data("validationdata").status;$.each(b.values,function(e,f){c=c&&($.isNumeric(f)&&(parseInt(f)<=a));if(!c){return false}});if(!c&&$.isSet(d)&&($.trim(d)!="")){b.messages.push(d)}return c},range:function(e,d,a){var c=true;var b=$(this).data("validationdata").status;if($.isSet(d,a)){c=$.proxy($.jqueryAnnexData.validation.validators.min,$(this),null,d)()&&$.proxy($.jqueryAnnexData.validation.validators.max,$(this),null,a)()}if(!c&&$.isSet(e)&&($.trim(e)!="")){b.messages.push(e)}return c},email:function(c){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(g,k){var e=/^[^@]{1,64}@[^@]{1,255}$/.test(k);if(e){var f=k.split("@");var j=f[0].split(".");for(var h=0;h<j.length;h++){if(!(/^(([A-Za-z0-9!#$%&'*+\/=?^_`{|}~-][A-Za-z0-9!#$%&'*+\/=?^_`{|}~\.-]{0,63})|(\\\"[^(\\|\\\")]{0,62}\\\"))$/.test(j[h]))){e=false}}var d="";if(!(/^\[?[0-9\.]+\]?$/.test(f[1]))){d=f[1].split(".");if(d.length<2){e=false}for(h=0;h<d.length;h++){if(!(/^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|([A-Za-z0-9]{2,5}))$/.test(d[h]))){e=false}}}}b=b&&e;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},url:function(c){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(d,e){b=b&&/^(https?|ftp)\:\/\/([a-z0-9+!*(),;?&=$_.-]+(\:[a-z0-9+!*(),;?&=$_.-]+)?@)?([a-z0-9+$_-]+\.)*[a-z0-9+$_-]{2,3}(\:[0-9]{2,5})?(\/([a-z0-9+$_-]\.?)+)*\/?(\?[a-z+&$_.-][a-z0-9;:@\/&%=+$_.-]*)?(#[a-z_.-][a-z0-9+$_.-]*)?$/.test(e);if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},date:function(c,d){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(g,l){if($.isSet(d)&&(d=="__internal__")){var j=l.split(" ");if(j.length>=2){l=$.trim(j[0])}else{l=""}}var m=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[1-2][0-9]|3[0-1])\/([1-2][0-9]{3})$/.test(l);var k=m?l.split("/"):null;if(m){for(var h=0;h<2;h++){if(k[h].length<2){k[h]="0"+k[h]}}}var f=m?new Date(k[2]+"-"+k[0]+"-"+k[1]):null;var e=((f!==null)&&(k!==null))?(!/Invalid|NaN/.test(f)&&(parseInt(k[0])==(f.getMonth()+1))&&(parseInt(k[1])==(f.getDate()))&&(parseInt(k[2])==(f.getFullYear()))):false;b=b&&e;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},time:function(c,d){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(f,h){if($.isSet(d)&&(d=="__internal__")){var g=h.split(" ");if(g.length>=2){h=$.trim(g[1]);if(g.length>=3){h+=" "+$.trim(g[2])}}else{h=""}}var e=/^((0?[0-9]|1[0-1])\:[0-5][0-9](\:[0-5][0-9])? ?(am|AM|pm|PM)|12\:[0-5][0-9](\:[0-5][0-9])? ?(pm|PM))$/.test(h);b=b&&e;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},datetime:function(c){var b=true;var a=$(this).data("validationdata").status;b=$.proxy($.jqueryAnnexData.validation.validators.date,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.time,$(this),null,"__internal__")();if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},dateISO:function(c,d){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(g,l){if($.isSet(d)&&(d=="__internal__")){var j=l.replace(/T/," ").split(" ");if(j.length>=2){l=$.trim(j[0])}else{l=""}}var m=/^([1-2][0-9]{3})\-(0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])$/.test(l);var k=m?l.split("-"):null;if(m){for(var h=1;h<3;h++){if(k[h].length<2){k[h]="0"+k[h]}}}var f=m?new Date(k.join("-")):null;var e=((f!==null)&&(k!==null))?(!/Invalid|NaN/.test(f)&&(parseInt(k[0])==(f.getFullYear()))&&(parseInt(k[1])==(f.getMonth()+1))&&(parseInt(k[2])==(f.getDate()))):false;b=b&&e;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},timeISO:function(c,d){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(f,h){if($.isSet(d)&&(d=="__internal__")){var g=h.replace(/T/," ").split(" ");if(g.length>=2){h=$.trim(g[1])}else{h=""}}var e=/^([0-1][0-9]|2[0-3])\:[0-5][0-9]\:[0-5][0-9]$/.test(h);b=b&&e;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},datetimeISO:function(c){var b=true;var a=$(this).data("validationdata").status;b=$.proxy($.jqueryAnnexData.validation.validators.dateISO,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.timeISO,$(this),null,"__internal__")();if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},dateDE:function(c,d){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(g,l){if($.isSet(d)&&(d=="__internal__")){var j=l.split(" ");if(j.length>=2){l=$.trim(j[0])}else{l=""}}var m=/^(0?[1-9]|[1-2][0-9]|3[0-1])\.(0?[1-9]|1[0-2])\.([1-2][0-9]{3})$/.test(l);var k=m?l.split("."):null;if(m){for(var h=0;h<2;h++){if(k[h].length<2){k[h]="0"+k[h]}}}var f=m?new Date(k[2]+"-"+k[1]+"-"+k[0]):null;var e=((f!==null)&&(k!==null))?(!/Invalid|NaN/.test(f)&&(parseInt(k[0])==(f.getDate()))&&(parseInt(k[1])==(f.getMonth()+1))&&(parseInt(k[2])==(f.getFullYear()))):false;b=b&&e;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},timeDE:function(c,d){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(f,h){if($.isSet(d)&&(d=="__internal__")){var g=h.split(" ");if(g.length>=2){h=$.trim(g[1])}else{h=""}}var e=/^([0-1][0-9]|2[0-3])\:[0-5][0-9](\:[0-5][0-9])?h?$/.test(h);b=b&&e;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},datetimeDE:function(c){var b=true;var a=$(this).data("validationdata").status;b=$.proxy($.jqueryAnnexData.validation.validators.dateDE,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.timeDE,$(this),null,"__internal__")();if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},number:function(c){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(d,e){b=b&&((e==""+parseInt(e))||(e==""+parseFloat(e)));if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},numberDE:function(c){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(e,f){var d=/^[0-9]+(\,[0-9]+)?$/.test(f);if(d){f=f.replace(/\,/g,".");d=((f==""+parseInt(f))||(f==""+parseFloat(f)))}b=b&&d;if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},digits:function(c){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(d,e){b=b&&/^[0-9]+$/.test(e);if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},creditcard:function(c){var b=true;var a=$(this).data("validationdata").status;$.each(a.values,function(d,e){b=b&&/^[0-9]{3,4}\-[0-9]{4}\-[0-9]{4}\-[0-9]{4}$/.test(e);if(!b){return false}});if(!b&&$.isSet(c)&&($.trim(c)!="")){a.messages.push(c)}return b},characterclass:function(e,d){var c=true;var b=$(this).data("validationdata").status;var a=new RegExp("^["+d+"]*$");$.each(b.values,function(f,g){c=c&&a.test(g);if(!c){return false}});if(!c&&$.isSet(e)&&($.trim(e)!="")){b.messages.push(e)}return c}}}});$.extend({triggerValidation:function(){$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets)},executeOnValidation:function(a){$.assert($.isFunction(a),"executeOnValidation | callback is no function");$.jqueryAnnexData.validation.config.globalCallback=a},setValidationFromTags:function(){$(":input[data-validation]").each(function(){if($.isPlainObject($(this).data("validation"))||$.isArray($(this).data("validation"))){var c=($.isSet($(this).data("validation-callback"))&&$.isFunction($(this).data("validation-callback")))?$(this).data("validation-callback"):null;var b=($.isSet($(this).data("validation-errorcontainer"))&&$.exists($(this).data("validation-errorcontainer")))?$(this).data("validation-errorcontainer"):null;var a=($.isSet($(this).data("validation-container"))&&$.exists($(this).data("validation-container")))?$(this).data("validation-container"):null;$(this).setValidation($(this).data("validation"),c,b,a)}})}});$.fn.extend({setValidation:function(a,h,e,g){$.assert($(this).is(":input"),"setValidation | element is no value-bearing form element");$.assert($.isSet($(this).attr("name")),'setValidation | element has no attribute "name"');if(!$.isSet(a)){a=[]}if(!$.isArray(a)){a=[a]}if(!$.isSet(g)){g=$(this).closest("form");if(!$.exists(g)){g=$(this)}else{g.off("submit.validation");g.on("submit.validation",function(i,j){if(!$.isSet(j)){i.preventDefault();$(document).one("finished.validation",function(l,k){g.trigger("submit.validation",k)});$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets)}else{if(!j){i.preventDefault()}}})}}else{g=g.find(":input")}var d=this;$(this).removeData("validationdata");var b={status:$.extend({},$.jqueryAnnexData.validation.config.defaultValidationData),rules:{},callback:h,container:g,errorContainer:e};var c=0;$.each(a,function(j,n){var o=$.objectLength(n);if($.isPlainObject(n)&&(o>=1)&&(o<=2)){if(o==2){$.assert($.exists("args",n))}var m=null;var k=null;var l=$.exists("args",n)?($.isArray(n.args)?n.args:[n.args]):[];$.each(n,function(q,p){if(q!="args"){m=q;k=p;return false}});if($.isSet(m)){m=m.split("_async");var i=(m.length>1);m=m[0];if(m=="optional"){b.status.isOptional=true;$.merge(b.status.optionalValues,l)}if($.isFunction($.jqueryAnnexData.validation.validators[m])){if(i){c++}b.rules[m+"_"+$.randomUUID(true)]=$.proxy.apply($,$.merge([],$.merge([$.jqueryAnnexData.validation.validators[m],$(d),""+$.trim(k)],l)))}}}});b.status.asyncCount=c;$.jqueryAnnexData.validation.config.registeredTargets.push($(this));var f=null;$(this).data("validationdata",b).on("change.validation blur.validation",function(){$.countermand(f);f=$.schedule(10,function(){$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets)})});return $(this)},unsetValidation:function(){$.assert($(this).is(":input"),"setValidation | element is no value-bearing form element");$.assert($.isSet($(this).attr("name")),'setValidation | element has no attribute "name"');if($.isSet($(this).data("validationdata"))){$(this).removeData("validationdata");var b=-1;for(var a=0;a<$.jqueryAnnexData.validation.config.registeredTargets.length;a++){if($(this).is($.jqueryAnnexData.validation.config.registeredTargets[a])){b=a;break}}if(b>0){$.removeFromArray($.jqueryAnnexData.validation.config.registeredTargets,b)}if($.jqueryAnnexData.validation.config.registeredTargets.length==0){$(this).closest("form").off("submit.validation")}$(this).off("change.validation blur.validation")}return $(this)}});