$.extend($.jqueryAnnexData,{validation:{config:{isValid:!0,messages:[],registeredTargets:{all:[]},globalCallback:$.noop,additionalWidgetEvents:"",validateOnWidgetEvents:!0,defaultValidationData:{isValid:!0,isOptional:!1,hasNonOptionalValue:!1,optionalValues:[""],asyncError:!1,asyncCount:0,asyncLeft:0,messages:[],values:[]}},functions:{validate:function(a,t){if($.isSet(t)||(t=!1),!t||t&&$.jqueryAnnexData.validation.config.validateOnWidgetEvents){var i=a.length;$.jqueryAnnexData.validation.config.isValid=!0,$.jqueryAnnexData.validation.config.messages=[],$.each(a,function(a,t){if($.isSet(t)){var e=t.data("validationdata");if($.isSet(e)){t.first().one("finished.validation",function(a,t){a.stopPropagation(),$.jqueryAnnexData.validation.config.isValid=$.jqueryAnnexData.validation.config.isValid&&t,t||$.merge($.jqueryAnnexData.validation.config.messages,$(a.target).data("validationdata").status.messages),i--,0>=i&&($.jqueryAnnexData.validation.config.globalCallback($.jqueryAnnexData.validation.config.isValid,$.jqueryAnnexData.validation.config.messages),$(document).trigger("finished.validation",$.jqueryAnnexData.validation.config.isValid))});var n=e.status.isOptional,s=e.status.asyncCount;e.status=$.extend(!0,{},$.jqueryAnnexData.validation.config.defaultValidationData),e.status.isOptional=n,e.status.asyncCount=s,e.status.asyncLeft=s,e.status.values=e.container.formDataToObject()[t.attr("name").replace(/\[\]/,"")],$.isSet(e.status.values)?$.isArray(e.status.values)||(e.status.values=[e.status.values]):e.status.values=[],e.status.isOptional&&$.each(e.status.values,function(a,t){return-1==$.inArray(t,e.status.optionalValues)?(e.status.hasNonOptionalValue=!0,!1):void 0}),t.data("validationdata",e),$.jqueryAnnexData.validation.functions.unmarkValidationError(t),e.status.isOptional&&!e.status.hasNonOptionalValue||$.isSet(t.attr("disabled"))?e.status.asyncLeft=0:($.each(e.rules,function(a,t){e.status.isValid=t()&&e.status.isValid}),e.status.isValid||($.jqueryAnnexData.validation.functions.markValidationError(t),e.status.asyncLeft<=0&&($.isSet(e.callback)&&$.isFunction(e.callback)&&e.callback(!1,e.status.messages,t),t.trigger("error.validation",e.status.messages)))),e.status.asyncLeft<=0&&(e.status.isValid&&($.isSet(e.callback)&&$.isFunction(e.callback)&&e.callback(!0,[],t),t.trigger("success.validation")),t.trigger("finished.validation",e.status.isValid))}else t.unsetValidation(!0)}})}},markValidationError:function(a){var t=a.data("validationdata").errorContainer;$.isSet(t)&&t.addClass("validationerror"),a.addClass("validationerror")},unmarkValidationError:function(a){var t=a.data("validationdata").errorContainer;$.isSet(t)&&t.removeClass("validationerror"),a.removeClass("validationerror")},asyncCallbackFactory:function(a,t){var i=a.data("validationdata").status,e=a.data("validationdata").callback,n=function(n){var s=$.isA(n,"boolean")?n:""===$.trim(""+n);i.asyncError=i.asyncError&&!s,i.isValid=i.isValid&&s,i.asyncLeft--,i.isValid?i.asyncLeft<=0&&($.isSet(e)&&$.isFunction(e)&&e(!0,[],a),a.trigger("success.validation")):($.jqueryAnnexData.validation.functions.markValidationError(a),s||i.messages.push($.isA(n,"string")&&""!==$.trim(""+n)?$.trim(""+n):t),i.asyncLeft<=0&&($.isSet(e)&&$.isFunction(e)&&e(!1,i.messages,a),a.trigger("error.validation",i.messages))),i.asyncLeft<=0&&a.trigger("finished.validation",i.isValid)};return n},asyncErrorCallbackFactory:function(a){var t=a.data("validationdata").status,i=a.data("validationdata").callback,e=function(){t.asyncLeft--,t.asyncError=!0,t.isValid=t.isValid&&!t.asyncError,$.jqueryAnnexData.validation.functions.markValidationError(a),t.messages.push("communication error, could not retrieve data from server"),$.log("communication error, could not retrieve data from server"),t.asyncLeft<=0&&($.isSet(i)&&$.isFunction(i)&&i(!1,t.messages,a),a.trigger("error.validation",t.messages),a.trigger("finished.validation",!1))};return e}},validators:{customcase:function(a,t){var i=!0,e=$(this).data("validationdata").status,n=null;if($.isArray(t)&&t.length<2&&(t=t[0]),$.isFunction(t)){var s=t($.jqueryAnnexData.validation.functions.asyncCallbackFactory($(this),a),$.jqueryAnnexData.validation.functions.asyncErrorCallbackFactory($(this)));$.isSet(s)&&($.isA(s,"boolean")?i=s:""!==$.trim(""+s)&&(i=!1,n=$.trim(""+s)))}else $.isA(t,"boolean")?i=t:""!==$.trim(""+t)&&(i=!1,n=$.trim(""+t));return $.isSet(n)?e.messages.push(a):!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},required:function(a){var t=!0,i=$(this).data("validationdata").status;return t=1==i.values.length?""!==i.values[0]:i.values.length>0,!t&&$.isSet(a)&&""!==a&&i.messages.push(a),t},notempty:function(a){var t=Array.prototype.slice.call(arguments,1),i=!0,e=$(this).data("validationdata").status,n=[""];return $.merge(n,t),i=1==e.values.length?-1==$.inArray($.trim(e.values[0]),n):0!==e.values.length,!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},optional:function(){return!0},minlength:function(a,t){t=parseInt(t,10);var i=!0,e=$(this).data("validationdata").status;return i=1==e.values.length?e.values[0].length>=t:e.values.length>=t,!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},maxlength:function(a,t){t=parseInt(t,10);var i=!0,e=$(this).data("validationdata").status;return i=1==e.values.length?e.values[0].length<=t:e.values.length<=t,!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},rangelength:function(a,t,i){var e=!0,n=$(this).data("validationdata").status;return $.isSet(t,i)&&(e=$.proxy($.jqueryAnnexData.validation.validators.minlength,$(this),null,t)()&&$.proxy($.jqueryAnnexData.validation.validators.maxlength,$(this),null,i)()),!e&&$.isSet(a)&&""!==$.trim(a)&&n.messages.push(a),e},min:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){return i=i&&$.isNumeric(e)&&parseInt(e,10)>=t,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},max:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){return i=i&&$.isNumeric(e)&&parseInt(e,10)<=t,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},range:function(a,t,i){var e=!0,n=$(this).data("validationdata").status;return $.isSet(t,i)&&(e=$.proxy($.jqueryAnnexData.validation.validators.min,$(this),null,t)()&&$.proxy($.jqueryAnnexData.validation.validators.max,$(this),null,i)()),!e&&$.isSet(a)&&""!==$.trim(a)&&n.messages.push(a),e},email:function(a){var t=!0,i=$(this).data("validationdata").status;return $.each(i.values,function(a,i){var e=/^[^@]{1,64}@[^@]{1,255}$/.test(i);if(e){for(var n=i.split("@"),s=n[0].split("."),r=0;r<s.length;r++)/^(([A-Za-z0-9!#$%&'*+\/=?^_`{|}~-][A-Za-z0-9!#$%&'*+\/=?^_`{|}~\.-]{0,63})|(\\\"[^(\\|\\\")]{0,62}\\\"))$/.test(s[r])||(e=!1);var l="";if(!/^\[?[0-9\.]+\]?$/.test(n[1]))for(l=n[1].split("."),l.length<2&&(e=!1),r=0;r<l.length;r++)/^(([A-Za-z0-9][A-Za-z0-9-]{0,61}[A-Za-z0-9])|([A-Za-z0-9]{2,5}))$/.test(l[r])||(e=!1)}return t=t&&e,t?void 0:!1}),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},url:function(a){var t=!0,i=$(this).data("validationdata").status;return $.each(i.values,function(a,i){return t=t&&/^(https?|ftp)\:\/\/([a-z0-9+!*(),;?&=$_.-]+(\:[a-z0-9+!*(),;?&=$_.-]+)?@)?([a-z0-9+$_-]+\.)*[a-z0-9+$_-]{2,3}(\:[0-9]{2,5})?(\/([a-z0-9+$_-]\.?)+)*\/?(\?[a-z+&$_.-][a-z0-9;:@\/&%=+$_.-]*)?(#[a-z_.-][a-z0-9+$_.-]*)?$/.test(i),t?void 0:!1}),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},date:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){if($.isSet(t)&&"__internal__"==t){var n=e.split(" ");e=n.length>=2?$.trim(n[0]):""}var s=/^(0?[1-9]|1[0-2])\/(0?[1-9]|[1-2][0-9]|3[0-1])\/([1-2][0-9]{3})$/.test(e),r=s?e.split("/"):null;if(s)for(var l=0;2>l;l++)r[l].length<2&&(r[l]="0"+r[l]);var o=s?new Date(r[2]+"-"+r[0]+"-"+r[1]):null,u=null!==o&&null!==r?!/Invalid|NaN/.test(o)&&parseInt(r[0],10)==o.getMonth()+1&&parseInt(r[1],10)==o.getDate()&&parseInt(r[2],10)==o.getFullYear():!1;return i=i&&u,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},time:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){if($.isSet(t)&&"__internal__"==t){var n=e.split(" ");n.length>=2?(e=$.trim(n[1]),n.length>=3&&(e+=" "+$.trim(n[2]))):e=""}var s=/^((0?[0-9]|1[0-1])\:[0-5][0-9](\:[0-5][0-9])? ?(am|AM|pm|PM)|12\:[0-5][0-9](\:[0-5][0-9])? ?(pm|PM))$/.test(e);return i=i&&s,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},datetime:function(a){var t=!0,i=$(this).data("validationdata").status;return t=$.proxy($.jqueryAnnexData.validation.validators.date,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.time,$(this),null,"__internal__")(),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},dateISO:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){if($.isSet(t)&&"__internal__"==t){var n=e.replace(/T/," ").split(" ");e=n.length>=2?$.trim(n[0]):""}var s=/^([1-2][0-9]{3})\-(0?[1-9]|1[0-2])\-(0?[1-9]|[1-2][0-9]|3[0-1])$/.test(e),r=s?e.split("-"):null;if(s)for(var l=1;3>l;l++)r[l].length<2&&(r[l]="0"+r[l]);var o=s?new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10)):null,u=null!==o&&null!==r?!/Invalid|NaN/.test(o)&&parseInt(r[0],10)==o.getFullYear()&&parseInt(r[1],10)==o.getMonth()+1&&parseInt(r[2],10)==o.getDate():!1;return i=i&&u,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},timeISO:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){if($.isSet(t)&&"__internal__"==t){var n=e.replace(/T/," ").split(" ");e=n.length>=2?$.trim(n[1]):""}var s=/^([0-1][0-9]|2[0-3])\:[0-5][0-9]\:[0-5][0-9]$/.test(e);return i=i&&s,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},datetimeISO:function(a){var t=!0,i=$(this).data("validationdata").status;return t=$.proxy($.jqueryAnnexData.validation.validators.dateISO,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.timeISO,$(this),null,"__internal__")(),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},dateDE:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){if($.isSet(t)&&"__internal__"==t){var n=e.split(" ");e=n.length>=2?$.trim(n[0]):""}var s=/^(0?[1-9]|[1-2][0-9]|3[0-1])\.(0?[1-9]|1[0-2])\.([1-2][0-9]{3})$/.test(e),r=s?e.split("."):null;if(s)for(var l=0;2>l;l++)r[l].length<2&&(r[l]="0"+r[l]);var o=s?new Date(parseInt(r[2],10),parseInt(r[1],10)-1,parseInt(r[0],10)):null,u=null!==o&&null!==r?!/Invalid|NaN/.test(o)&&parseInt(r[0],10)==o.getDate()&&parseInt(r[1],10)==o.getMonth()+1&&parseInt(r[2],10)==o.getFullYear():!1;return i=i&&u,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},timeDE:function(a,t){var i=!0,e=$(this).data("validationdata").status;return $.each(e.values,function(a,e){if($.isSet(t)&&"__internal__"==t){var n=e.split(" ");e=n.length>=2?$.trim(n[1]):""}var s=/^([0-1][0-9]|2[0-3])\:[0-5][0-9](\:[0-5][0-9])?h?$/.test(e);return i=i&&s,i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i},datetimeDE:function(a){var t=!0,i=$(this).data("validationdata").status;return t=$.proxy($.jqueryAnnexData.validation.validators.dateDE,$(this),null,"__internal__")()&&$.proxy($.jqueryAnnexData.validation.validators.timeDE,$(this),null,"__internal__")(),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},number:function(a){var t=!0,i=$(this).data("validationdata").status;return $.each(i.values,function(a,i){return t=t&&(i==""+parseInt(i,10)||i==""+parseFloat(i)),t?void 0:!1}),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},numberDE:function(a){var t=!0,i=$(this).data("validationdata").status;return $.each(i.values,function(a,i){var e=/^[0-9]+(\,[0-9]+)?$/.test(i);return e&&(i=i.replace(/\,/g,"."),e=i==""+parseInt(i,10)||i==""+parseFloat(i)),t=t&&e,t?void 0:!1}),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},digits:function(a){var t=!0,i=$(this).data("validationdata").status;return $.each(i.values,function(a,i){return t=t&&/^[0-9]+$/.test(i),t?void 0:!1}),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},creditcard:function(a){var t=!0,i=$(this).data("validationdata").status;return $.each(i.values,function(a,i){return t=t&&/^[0-9]{3,4}\-[0-9]{4}\-[0-9]{4}\-[0-9]{4}$/.test(i),t?void 0:!1}),!t&&$.isSet(a)&&""!==$.trim(a)&&i.messages.push(a),t},characterclass:function(a,t){var i=!0,e=$(this).data("validationdata").status,n=new RegExp("^["+t+"]*$");return $.each(e.values,function(a,t){return i=i&&n.test(t),i?void 0:!1}),!i&&$.isSet(a)&&""!==$.trim(a)&&e.messages.push(a),i}}}}),$.extend({triggerValidation:function(a){a=$.isSet(a)?""+a:"all",$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets[a])},executeOnValidation:function(a){$.assert($.isFunction(a),"executeOnValidation | callback is no function"),$.jqueryAnnexData.validation.config.globalCallback=a},validationIsTriggeredByWidgetEvents:function(a){a=a?!0:!1,$.jqueryAnnexData.validation.config.validateOnWidgetEvents=a},setAdditionalValidationWidgetEvents:function(a){$.assert($.isArray(a),"events need to be an array");var t="";$.each(a,function(a,i){t+=i+".validation "}),t=" "+$.trim(t),$.jqueryAnnexData.validation.config.additionalWidgetEvents=t},setValidationFromTags:function(){$(":input[data-validation]").each(function(){if($.isPlainObject($(this).data("validation"))||$.isArray($(this).data("validation"))){var a=$.isSet($(this).data("validation-callback"))&&$.isFunction($(this).data("validation-callback"))?$(this).data("validation-callback"):null,t=$.isSet($(this).data("validation-errorcontainer"))&&$.exists($(this).data("validation-errorcontainer"))?$(this).data("validation-errorcontainer"):null,i=$.isSet($(this).data("validation-container"))&&$.exists($(this).data("validation-container"))?$(this).data("validation-container"):null,e=$.isSet($(this).data("validation-targetgroup"))?$(this).data("validation-targetgroup"):null,n=$.isSet($(this).data("validation-suppresssubmit"))?"true"==$(this).data("validation-suppresssubmit"):!1;$(this).setValidation($(this).data("validation"),a,t,i,e,n)}})}}),$.fn.extend({setValidation:function(a,t,i,e,n,s){return $.isSet(a)||(a=[]),$.isArray(a)||(a=[a]),n=$.isSet(n)?""+n:"all",s=$.isSet(s)?s===!0:!1,$.isSet(e)?e=e.find(":input"):(e=$(this).closest("form"),$.exists(e)?(e.off("submit.validation"),e.on("submit.validation",function(a,t){$.isSet(t)?(!t||s)&&a.preventDefault():(a.preventDefault(),$(document).one("finished.validation",function(a,t){e.trigger("submit.validation",t)}),$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets[n]))})):e=$(this)),$(this).each(function(){$.assert($(this).is(":input"),"setValidation | element is no value-bearing form element"),$.assert($.isSet($(this).attr("name")),'setValidation | element has no attribute "name"');var s=this;$(this).removeData("validationdata");var r={status:$.extend({},$.jqueryAnnexData.validation.config.defaultValidationData),rules:{},callback:t,container:e,errorContainer:i},l=0;$.each(a,function(a,t){var i=$.objectLength(t);if($.isPlainObject(t)&&i>=1&&2>=i){2==i&&$.assert($.exists("args",t));var e=null,n=null,o=$.exists("args",t)?$.isArray(t.args)?t.args:[t.args]:[];if($.each(t,function(a,t){return"args"!=a?(e=a,n=t,!1):void 0}),$.isSet(e)){e=e.split("_async");var u=e.length>1;e=e[0],"optional"==e&&(r.status.isOptional=!0,$.merge(r.status.optionalValues,o)),$.isFunction($.jqueryAnnexData.validation.validators[e])&&(u&&l++,r.rules[e+"_"+$.randomUUID(!0)]=$.proxy.apply($,$.merge([],$.merge([$.jqueryAnnexData.validation.validators[e],$(s),""+$.trim(n)],o))))}}}),r.status.asyncCount=l,$.jqueryAnnexData.validation.config.registeredTargets.all.push($(this)),"all"!=n&&($.isSet($.jqueryAnnexData.validation.config.registeredTargets[n])||($.jqueryAnnexData.validation.config.registeredTargets[n]=[]),$.jqueryAnnexData.validation.config.registeredTargets[n].push($(this)));var o=null;$(this).data("validationdata",r).on("change.validation blur.validation"+$.jqueryAnnexData.validation.config.additionalWidgetEvents,function(){$.countermand(o),o=$.schedule(10,function(){$.jqueryAnnexData.validation.functions.validate($.jqueryAnnexData.validation.config.registeredTargets[n],!0)})})}),this},unsetValidation:function(a,t){return a=$.isSet(a)?a:!1,t=$.isSet(t)&&$.jqueryAnnexData.validation.config.registeredTargets[t]?""+t:null,$(this).each(function(){$.assert($(this).is(":input"),"unsetValidation | element is no value-bearing form element"),$.assert($.isSet($(this).attr("name")),'unsetValidation | element has no attribute "name"');var i=this;if($.isSet($(this).data("validationdata"))||a){$(this).removeData("validationdata");var e={};$.isSet(t)?(e.all=$.jqueryAnnexData.validation.config.registeredTargets.all,e[t]=$.jqueryAnnexData.validation.config.registeredTargets[t]):e=$.jqueryAnnexData.validation.config.registeredTargets,$.each(e,function(a,t){if($.isSet(t)){for(var e=-1,n=0;n<t.length;n++)if($(i).attr("name")==t[n].attr("name")){e=n;break}e>=0&&($.jqueryAnnexData.validation.config.registeredTargets[a]=$.removeFromArray($.jqueryAnnexData.validation.config.registeredTargets[a],e)),0===$.jqueryAnnexData.validation.config.registeredTargets[a].length&&($(this).closest("form").off("submit.validation"),"all"!=a&&delete $.jqueryAnnexData.validation.config.registeredTargets[a])}}),$(this).off("change.validation blur.validation"+$.jqueryAnnexData.validation.config.additionalWidgetEvents)}}),this}});